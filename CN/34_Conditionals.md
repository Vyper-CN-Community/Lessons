# 掌握 Vyper 中的条件逻辑：使用 if, elif 和 else

条件语句是编程中的基本构建块，允许你的智能合约根据特定标准做出决策并执行不同的代码路径。在 Vyper（一种用于编写安全高效以太坊智能合约的语言）中，条件逻辑使用 `if`, `elif`, 和 `else` 语句实现，就像在 Python 中一样。本课将指导你理解并实现这些关键的控制流结构。

## 设置合约

在深入条件语句之前，让我们建立 Vyper 合约文件（例如 `ifElse.vy`）的基本结构：

```vyper
# Pragma Directive
pragma version ^0.4.0
```

这一行告诉编译器代码是为 Vyper 0.4.0 版本或 0.4.x 系列中的任何兼容后续版本编写的。

## 实现条件语句

我们可以实现一个 `if_else` 函数来演示条件逻辑。

```vyper
@external
@pure
def if_else(x: uint256) -> uint256:
    if x <= 10:
        return 1
    elif x <= 20:
        return 2
    else:
        return 0
```

### 逻辑分解

1.  **`if` 语句**：
    *   `if x <= 10:`
    *   代码检查输入值 `x` 是否小于或等于 10。
    *   **动作**：如果为真，它返回 `1`。函数在此停止。

2.  **`elif` 语句 (Else If)**：
    *   `elif x <= 20:`
    *   如果第一个条件为假（意味着 `x` 大于 10），Vyper 检查此条件。
    *   **动作**：如果 `x` 小于或等于 20（但 > 10），它返回 `2`。

3.  **`else` 语句**：
    *   `else:`
    *   如果前两个条件都为假（意味着 `x` 大于 20）。
    *   **动作**：它执行此块中的代码，返回 `0`。

## 代码优化：添加 @pure 装饰器

观察我们的 `if_else` 函数，我们注意到它不从合约存储中读取或写入，也不与区块链环境交互（如检查区块号或余额）。它仅对其输入参数进行操作。在这种情况下，我们可以在 `@external` 旁边添加 `@pure` 装饰器。

*   `@pure`：此装饰器表示函数承诺不读取或修改任何状态。这是比 `@view`（允许读取状态）更严格的保证，可以实现优化并更清晰地理解函数的行为。

## 在 Remix IDE 中测试

为了验证我们的逻辑，我们可以使用 Remix IDE：

1.  **编译**：导航到 "Vyper Compiler" 选项卡，选择 `ifElse.vy`，然后点击 "Compile"。
2.  **部署**：转到 "Deploy & Run Transactions" 选项卡并部署合约。
3.  **交互**：
    *   **测试 1**：输入 `1`。调用。输出应为 `1`。
    *   **测试 2**：输入 `20`。调用。输出应为 `2`。
    *   **测试 3**：输入 `100`。调用。输出应为 `0`。

这确认了控制流按预期工作。
